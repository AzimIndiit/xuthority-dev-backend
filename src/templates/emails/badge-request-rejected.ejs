<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Badge Request Update</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; margin: 0; padding: 0; background-color: #f4f4f4;">
  <table role="presentation" style="width: 100%; border-collapse: collapse;">
    <tr>
      <td style="padding: 0;">
        <div style="max-width: 600px; margin: 0 auto; background-color: #ffffff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
          <!-- Header -->
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 40px 30px; text-align: center; border-radius: 8px 8px 0 0;">
            <h1 style="color: #ffffff; margin: 0; font-size: 32px; font-weight: 600;">Badge Request Update</h1>
            <p style="color: #e6e6fa; margin: 10px 0 0 0; font-size: 18px;">Important Information About Your Request</p>
          </div>

          <!-- Content -->
          <div style="padding: 40px 30px;">
            <h2 style="color: #333; margin-bottom: 10px; font-size: 24px;">Hi <%= user.firstName %>,</h2>
            
            <p style="font-size: 16px; margin-bottom: 20px;">
              Thank you for your interest in earning the <strong><%= badge.title %></strong> badge. We've carefully reviewed your request and wanted to provide you with an update.
            </p>

            <!-- Badge Display -->
            <div style="background-color: #f8f9fa; border-radius: 12px; padding: 30px; margin: 30px 0; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
              <img src="<%= badge.icon %>" alt="<%= badge.title %>" style="width: 64px; height: 64px; margin-bottom: 15px; opacity: 0.5;">
              <h3 style="color: #6c757d; margin: 0 0 10px 0; font-size: 24px;"><%= badge.title %></h3>
              <p style="color: #6c757d; margin: 0; font-size: 16px;"><%= badge.description %></p>
            </div>

            <div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; margin: 30px 0; border-radius: 4px;">
              <h3 style="color: #856404; margin-top: 0; margin-bottom: 10px;">Request Status</h3>
              <p style="color: #856404; margin: 0;">
                After careful consideration, we're unable to approve your badge request at this time. This decision was made to maintain the high standards and integrity of our badge system.
              </p>
            </div>

            <% if (rejectionReason) { %>
            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin: 30px 0;">
              <h4 style="color: #495057; margin-top: 0;">Feedback</h4>
              <p style="color: #495057; margin: 0;"><%= rejectionReason %></p>
            </div>
            <% } %>

            <div style="background-color: #e8f5e9; padding: 20px; border-radius: 8px; margin: 30px 0;">
              <h4 style="color: #2e7d32; margin-top: 0;">What You Can Do Next</h4>
              <ul style="margin: 0; padding-left: 20px; color: #2e7d32;">
                <li style="margin-bottom: 8px;">Review the badge criteria and requirements</li>
                <li style="margin-bottom: 8px;">Continue building your profile and contributions</li>
                <li style="margin-bottom: 8px;">Engage more actively with the community</li>
                <li style="margin-bottom: 8px;">Reapply when you meet all the requirements</li>
              </ul>
            </div>

            <p style="font-size: 16px; margin-bottom: 25px;">
              We encourage you to continue your journey with us. Many of our most valued members didn't earn their badges on the first try. Keep contributing, learning, and growing!
            </p>

            <div style="text-align: center; margin: 40px 0;">
              <a href="<%= badgesUrl %>" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff; padding: 15px 40px; text-decoration: none; border-radius: 30px; font-weight: bold; font-size: 16px; display: inline-block; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
                Explore Other Badges
              </a>
            </div>

            <div style="background-color: #f0f4ff; border-left: 4px solid #667eea; padding: 20px; margin: 30px 0; border-radius: 4px;">
              <h4 style="color: #667eea; margin-top: 0;">ðŸ’¡ Tips for Success</h4>
              <ul style="margin: 0; padding-left: 20px; color: #667eea;">
                <li style="margin-bottom: 8px;">Complete your profile with all relevant information</li>
                <li style="margin-bottom: 8px;">Actively participate in community discussions</li>
                <li style="margin-bottom: 8px;">Share valuable insights and experiences</li>
                <li style="margin-bottom: 8px;">Build genuine connections with other members</li>
              </ul>
            </div>

            <p style="font-size: 16px; margin-top: 30px;">
              Remember, this is not the end but a stepping stone in your journey. We're here to support you every step of the way.
            </p>

            <p style="font-size: 16px; margin-top: 20px;">
              Best regards,<br>
              <strong>The <%= appName %> Team</strong>
            </p>
          </div>

          <!-- Footer -->
          <div style="background-color: #f8f9fa; padding: 30px; text-align: center; border-top: 1px solid #e9ecef; border-radius: 0 0 8px 8px;">
            <p style="font-size: 14px; color: #666; margin: 0 0 10px 0;">
              Have questions? Contact us at <a href="mailto:<%= supportEmail %>" style="color: #667eea; text-decoration: none;"><%= supportEmail %></a>
            </p>
            <p style="font-size: 14px; color: #666; margin: 0 0 10px 0;">
              <%= companyName %><br>
              <%= companyAddress %>
            </p>
            <p style="font-size: 12px; color: #999; margin: 15px 0 0 0;">
              Â© <%= currentYear %> <%= appName %>. All rights reserved.
            </p>
          </div>
        </div>
      </td>
    </tr>
  </table>
</body>
</html>